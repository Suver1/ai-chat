@import 'tailwindcss';

@custom-variant dark (&:where(.dark, .dark *));

:root {
  /* Catppuccin Macchiato pallete */
  --crust: 236 23% 12%;
  --mantle: 233 23% 15%;
  --base: 232 23% 18%;
  --surface0: 230 19% 26%;
  --surface1: 231 16% 34%;
  --surface2: 230 14% 41%;
  --overlay0: 230 12% 49%;
  --overlay1: 228 15% 57%;
  --overlay2: 228 20% 65%;
  --subtext0: 227 27% 72%;
  --subtext1: 228 39% 80%;
  --text: 227 68% 88%;
  --lavender: 234 82% 85%;
  --blue: 220 83% 75%;
  --sapphire: 199 66% 69%;
  --sky: 189 59% 73%;
  --teal: 171 47% 69%;
  --green: 105 48% 72%;
  --yellow: 40 70% 78%;
  --peach: 21 86% 73%;
  --maroon: 355 71% 77%;
  --red: 351 74% 73%;
  --mauve: 267 83% 80%;
  --pink: 316 74% 85%;
  --flamingo: 0 58% 86%;
  --rosewater: 10 58% 90%;

  /*
  --secondary:
  --secondary-foreground:
  --accent:
  --accent-foreground:
  --border:
  --input:
  --radius:
  --sidebar-primary:
  --sidebar-primary-foreground
  --sidebar-accent:
  --sidebar-accent-foreground:
  --sidebar-border:
  --chat-border:
  --chat-accent:
  --chat-overlay:
  */
  --primary: var(--mauve);
  --primary-foreground: var(--base);
  --sidebar-background: var(--mantle);
  --sidebar-foreground: var(--text);
  --chat-background: var(--base);
  --chat-foreground: var(--text);
  --chat-input-background: var(--surface0);
  --chat-input-foreground: var(--text);
  --chat-input-border: var(--surface1);
  --error: var(--red);
  --link: var(--blue);
  --focus-ring: var(--lavender);
  --bubble-user-bg: var(--mauve);
  --bubble-user-fg: var(--base);
  --bubble-ai-bg: var(--surface1);
  --bubble-ai-fg: var(--text);
  --border-subtle: var(--surface1);
  --border-strong: var(--surface2);
  --prompt-height: 0px; /* updated dynamically */
}

.bg-primary {
  background-color: hsl(var(--primary));
}
.bg-primary-foreground {
  color: hsl(var(--primary-foreground));
}

.bg-sidebar-background {
  background-color: hsl(var(--sidebar-background));
}
.bg-sidebar-foreground {
  color: hsl(var(--sidebar-foreground));
}

.bg-chat-background {
  background-color: hsl(var(--chat-background));
}

.bg-chat-foreground {
  color: hsl(var(--chat-foreground));
}

.bg-chat-input-background {
  background-color: hsl(var(--chat-input-background));
}

.bg-chat-input-foreground {
  color: hsl(var(--chat-input-foreground));
}

.bg-chat-input-border {
  border-color: hsla(var(--chat-input-border) / 0.2);
}

.error {
  color: hsl(var(--error));
}

.link {
  color: hsl(var(--link));
  text-decoration: underline;
}

.link:hover {
  color: hsla(var(--link) / 0.8);
  text-decoration: none;
}

/* Focus ring utility */
.focus-ring:focus-visible {
  outline: 2px solid hsl(var(--focus-ring));
  outline-offset: 2px;
}

/* Sidebar slide transition */
.sidebar-transition {
  transition: transform 160ms ease, box-shadow 160ms ease;
}

/* Chat bubbles */
.chat-bubble-user {
  background: hsl(var(--bubble-user-bg));
  color: hsl(var(--bubble-user-fg));
  border-radius: 1rem;
  padding: 0.5rem 0.75rem;
  max-width: 80%;
  word-break: break-word;
  line-height: 1.4;
}

.chat-bubble-ai {
  background: hsl(var(--bubble-ai-bg));
  color: hsl(var(--bubble-ai-fg));
  border-radius: 1rem;
  padding: 0.5rem 0.75rem;
  max-width: 80%;
  word-break: break-word;
  line-height: 1.4;
}

/* Surface background utility for hover (using existing token) */
.bg-surface1\/40 {
  /* Tailwind-like custom utility; fallback simple rgba */
  background-color: hsla(var(--surface1) / 0.4);
}

/* Ensure last message visible by allowing dynamic padding based on prompt height */

/* Live region for streaming updates */
[aria-live] {
  /* ensure region can receive focus for SR navigation if needed */
  position: relative;
}

/* Buttons & interactive */
button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

button:not(:disabled):hover {
  filter: brightness(1.05);
}

select:focus-visible,
textarea:focus-visible,
input:focus-visible,
button:focus-visible {
  outline: 2px solid hsl(var(--focus-ring));
  outline-offset: 2px;
}

textarea,
select,
input {
  background: hsl(var(--chat-input-background));
  color: hsl(var(--chat-input-foreground));
  border: 1px solid hsl(var(--border-subtle));
}

textarea::placeholder {
  color: hsla(var(--chat-input-foreground) / 0.6);
}
/* Textarea autogrow (handled via small JS helper). Base styling only here. */
textarea[data-autogrow='true'] {
  min-height: 2.5rem;
}
